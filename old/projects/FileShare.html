<h1 class="wp-block-heading has-text-align-center" style="padding-top:var(--wp--preset--spacing--30)">FileShare</h1>
<p class="has-text-align-center">Easy file sharing website featuring (direct) link generation and delete timer.</p>
<hr class="wp-block-separator has-alpha-channel-opacity is-style-wide"
    style="margin-top:var(--wp--preset--spacing--40);margin-bottom:var(--wp--preset--spacing--40)" />
<div class="wp-block-columns alignwide" style="padding-top:0;padding-right:0;padding-bottom:0;padding-left:0">
    <div class="wp-block-column">
        <div class="wp-block-group has-border-color has-ast-global-color-2-border-color has-ast-global-color-2-background-color has-background"
            style="border-width:5px;border-radius:10px">
            <div class="wp-block-outermost-icon-block items-justified-center"
                style="margin-top:var(--wp--preset--spacing--20)">
                <a class="icon-container has-icon-color has-ast-global-color-4-color"
                    href="https://github.com/Toomas633/FileShare"
                    style="color:var(--ast-global-color-4);width:80px;padding-top:var(--wp--preset--spacing--30)">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                        <path
                            d="M12,2C6.477,2,2,6.477,2,12c0,4.419,2.865,8.166,6.839,9.489c0.5,0.09,0.682-0.218,0.682-0.484 c0-0.236-0.009-0.866-0.014-1.699c-2.782,0.602-3.369-1.34-3.369-1.34c-0.455-1.157-1.11-1.465-1.11-1.465 c-0.909-0.62,0.069-0.608,0.069-0.608c1.004,0.071,1.532,1.03,1.532,1.03c0.891,1.529,2.341,1.089,2.91,0.833 c0.091-0.647,0.349-1.086,0.635-1.337c-2.22-0.251-4.555-1.111-4.555-4.943c0-1.091,0.39-1.984,1.03-2.682 C6.546,8.54,6.202,7.524,6.746,6.148c0,0,0.84-0.269,2.75,1.025C10.295,6.95,11.15,6.84,12,6.836 c0.85,0.004,1.705,0.114,2.504,0.336c1.909-1.294,2.748-1.025,2.748-1.025c0.546,1.376,0.202,2.394,0.1,2.646 c0.64,0.699,1.026,1.591,1.026,2.682c0,3.841-2.337,4.687-4.565,4.935c0.359,0.307,0.679,0.917,0.679,1.852 c0,1.335-0.012,2.415-0.012,2.741c0,0.269,0.18,0.579,0.688,0.481C19.138,20.161,22,16.416,22,12C22,6.477,17.523,2,12,2z">
                        </path>
                    </svg>
                </a>
            </div>
            <p class="has-text-align-center">GitHub</p>
        </div>
    </div>
    <div class="wp-block-column">
        <div class="wp-block-group has-border-color has-ast-global-color-2-border-color has-ast-global-color-2-background-color has-background"
            style="border-width:5px;border-radius:10px;padding-top:0;padding-right:0;padding-bottom:0;padding-left:0">
            <div class="wp-block-outermost-icon-block items-justified-center"
                style="margin-top:var(--wp--preset--spacing--20)">
                <a class="icon-container" href="https://hub.docker.com/r/toomas633/fileshare"
                    style="width:80px;padding-top:var(--wp--preset--spacing--30)">
                    <svg width="256px" height="256px" viewBox="0 0 32 32" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                        <g id="SVGRepo_iconCarrier">
                            <circle cx="16" cy="16" r="14" fill="#1794D4"></circle>
                            <path d="M18 7H16V9H18V7Z" fill="white"></path>
                            <path d="M10 10H12V12H10V10Z" fill="white"></path>
                            <path
                                d="M6.00155 16.9414C6.17244 19.8427 7.90027 24 14 24C20.8 24 23.8333 19 24.5 16.5C25.3333 16.5 27.2 16 28 14C27.5 13.5 25.5 13.5 24.5 14C24.5 13.2 24 11.5 23 11C22.3333 11.6667 21.3 13.4 22.5 15C22 16 20.6667 16 20 16H6.9429C6.41342 16 5.97041 16.4128 6.00155 16.9414Z"
                                fill="white"></path>
                            <path d="M9 13H7V15H9V13Z" fill="white"></path>
                            <path d="M10 13H12V15H10V13Z" fill="white"></path>
                            <path d="M15 13H13V15H15V13Z" fill="white"></path>
                            <path d="M16 13H18V15H16V13Z" fill="white"></path>
                            <path d="M21 13H19V15H21V13Z" fill="white"></path>
                            <path d="M15 10H13V12H15V10Z" fill="white"></path>
                            <path d="M16 10H18V12H16V10Z" fill="white"></path>
                        </g>
                    </svg>
                </a>
            </div>
            <p class="has-text-align-center has-ast-global-color-1-color has-text-color">Docker hub</p>
        </div>
    </div>
</div>
<hr class="wp-block-separator has-alpha-channel-opacity is-style-wide"
    style="margin-top:var(--wp--preset--spacing--40);margin-bottom:var(--wp--preset--spacing--40)" />
<div class="wp-block-columns alignwide" style="padding-top:0;padding-right:0;padding-bottom:0;padding-left:0">
    <div class="wp-block-column" style="flex-basis:50%">
        <div class="wp-block-group has-ast-global-color-2-background-color has-background"
            style="border-radius:10px;padding-top:var(--wp--preset--spacing--30);padding-right:var(--wp--preset--spacing--30);padding-bottom:var(--wp--preset--spacing--80);padding-left:var(--wp--preset--spacing--30)">
            <h2 class="wp-block-heading has-text-align-center">Features</h2>
            <ul>
                <li>Single file upload</li>
                <li>Random name toggle</li>
                <li>Status popups</li>
                <li>File preview icons</li>
                <li>Delete time slider (1-12h, 24h, never)</li>
                <li>Easy link copy</li>
                <li>
                    Admin page
                    <ul>
                        <li>Display timezone</li>
                        <li>Delete and download buttons</li>
                        <li>Delete time</li>
                        <li>Hyperlink to download page</li>
                        <li>Custom link address</li>
                    </ul>
                </li>
                <li>
                    Download page
                    <ul>
                        <li>Download, delete buttons</li>
                        <li>Delete time</li>
                    </ul>
                </li>
                <li>Automatic file deletion</li>
                <li>Responsive css for all screen sizes</li>
            </ul>
        </div>
    </div>
    <div class="wp-block-column" style="flex-basis:50%">
        <div class="wp-block-group has-ast-global-color-2-background-color has-background"
            style="border-radius:10px;padding-top:var(--wp--preset--spacing--20);padding-right:var(--wp--preset--spacing--30);padding-bottom:var(--wp--preset--spacing--20);padding-left:var(--wp--preset--spacing--30)">
            <h2 class="wp-block-heading has-text-align-center">Requirements</h2>
            <ul>
                <li>Make sure you have PHP installed on your local machine. You can check this by running the command
                    <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">php -v</mark></code>
                    in your terminal. If you don't have PHP installed, you can download it from the <a
                        href="https://www.php.net/">official PHP website</a>.
                </li>
                <li>Install Python on your Windows machine if it is not already installed. You can download the latest
                    version of Python from the official website at <a
                        href="https://www.python.org/downloads/">https://www.python.org/downloads/</a>.
                </li>
                <li>Change the values of
                    <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">post_max_size</mark></code>
                    and
                    <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">upload_max_filesize</mark></code>
                    in <code>php.ini</code> to a desired size amount, or bigger files can't be uploaded (defaults are 8M
                    and 2M in the file, so the uploaded file can only be of size 2MB and less). Not needed on docker
                    image.
                </li>
                <li>
                    Check that you have php-sqlite3 and php-curl installed and enabled.
                    <ul>
                        <li>On debian run
                            <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">sudo apt install php-sqlite3 php-curl</mark></code>,
                            windows should have the .dll files included in the php folder.
                        </li>
                        <li>Edit <code>php.ini</code> and uncomment
                            <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">extension=pdo_sqlite</mark></code>,
                            <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">extension=sqlite3</mark></code>,
                            <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">extension=curl</mark></code>
                            and assign the php installation directory path to
                            <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">sqlite3.extension_dir =</mark></code>,
                            for example
                            <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">sqlite3.extension_dir = C:\php</mark></code>
                            on windows if you put php on C drive root.
                        </li>
                    </ul>
                </li>
                <li>Check that you have pytz and datetime install for python by running
                    <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">pip install pytz datetime</mark></code>.
                </li>
            </ul>
        </div>
    </div>
</div>
<hr class="wp-block-separator has-alpha-channel-opacity is-style-wide"
    style="margin-top:var(--wp--preset--spacing--40);margin-bottom:var(--wp--preset--spacing--40)" />
<h2 class="wp-block-heading has-text-align-center">Running instructions</h2>
<ul>
    <li>Install PHP and Python (and add to system path on windows).</li>
    <li>Clone the GitHub repository to your local machine using the command
        <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">git clone https://github.com/Toomas633/FileShare.git</mark></code>
        or download the zip from releases and unpack it to desired destination.
    </li>
    <li>Start a local server to access the website in your browser. You can do this by running the command
        <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">php -S localhost:8000</mark></code>
        (or a different port number) in your terminal from the project directory.
    </li>
    <li>For timed file delete also run
        <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">cleanup.py</mark></code>
        on the backround.
    </li>
    <li>Access the website in your browser. Once the server is running, you can access the website by navigating to <a
            href="http://localhost:8000">http://localhost:8000</a> (or the appropriate URL) in your web browser.</li>
</ul>
<div class="wp-block-columns alignwide" style="padding-top:0;padding-right:0;padding-bottom:0;padding-left:0">
    <div class="wp-block-column" style="border-style:none;border-width:0px;flex-basis:45%">
        <div class="wp-block-group has-ast-global-color-2-background-color has-background"
            style="border-radius:10px;padding-top:var(--wp--preset--spacing--30);padding-right:var(--wp--preset--spacing--30);padding-bottom:var(--wp--preset--spacing--30);padding-left:var(--wp--preset--spacing--30)">
            <h3 class="wp-block-heading has-text-align-center" style="padding-top:var(--wp--preset--spacing--30)">Debian
                service
            </h3>
            <ul
                style="padding-top:0;padding-right:var(--wp--preset--spacing--60);padding-bottom:var(--wp--preset--spacing--50);padding-left:var(--wp--preset--spacing--60)">
                <li>Create a new systemd service file for your PHP website by running the command
                    <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">sudo nano /etc/systemd/system/FileShare.service</mark></code>.
                </li>
                <li>Download systemd service to
                    <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">/etc/systemd/system/</mark></code>
                    by running
                    <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">sudo wget https://raw.githubusercontent.com/Toomas633/FileShare/main/examples/FileShare.service</mark></code>
                    in
                    <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">cd /etc/systemd/system/</mark></code>
                </li>
                <li>Make sure to replace "/path/to/start.sh" with the path to the FileShare website folder that contains
                    the start.sh file on your server.
                </li>
                <li>Reload the systemd daemon to recognize the new service by running the command
                    <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">sudo systemctl daemon-reload</mark></code>.
                </li>
                <li>Start the new service by running the command
                    <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">sudo systemctl start FileShare.service</mark></code>.
                </li>
                <li>Verify that the service is running properly by checking the status with the command
                    <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">sudo systemctl status FileShare.service</mark></code>.
                </li>
                <li>If the service is running correctly, enable it to start at boot time by running the command
                    <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">sudo systemctl enable FileShare.service</mark></code>.
                </li>
            </ul>
        </div>
    </div>
    <div class="wp-block-column">
        <div class="wp-block-group has-ast-global-color-2-background-color has-background"
            style="border-radius:10px;padding-top:var(--wp--preset--spacing--30);padding-right:var(--wp--preset--spacing--30);padding-bottom:var(--wp--preset--spacing--60);padding-left:var(--wp--preset--spacing--30)">
            <h3 class="wp-block-heading has-text-align-center" style="padding-top:var(--wp--preset--spacing--30)">
                Windows
            </h3>
            <ul>
                <li>
                    Enable running the website in the background (or just double click to run once in a dialog
                    box)
                    <ul>
                        <li>Open the Task Scheduler by pressing the Windows key + R, typing "taskschd.msc" and hitting
                            Enter.
                        </li>
                        <li>Click on the "Create Task" option in the Actions pane on the right-hand side of the window.
                        </li>
                        <li>In the "General" tab of the "Create Task" dialog box, enter a name for the task in the
                            "Name" field.
                        </li>
                        <li>In the "Security options" section, select the user account you want to run the task under.
                        </li>
                        <li>Click on the "Triggers" tab and click "New".</li>
                        <li>In the "New Trigger" dialog box, select "At startup" from the "Begin the task" drop-down
                            menu.
                        </li>
                        <li>Click "OK" to save the trigger.</li>
                        <li>Click on the "Actions" tab and click "New".</li>
                        <li>In the "New Action" dialog box, select "Start a program" from the "Action" drop-down menu.
                        </li>
                        <li>In the "Program/script" field, enter the full path to the
                            <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">start.bat</mark></code>
                            file.
                        </li>
                        <li>Click "OK" twice to save the action and task.</li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div>
<div class="wp-block-columns alignwide"
    style="padding-top:var(--wp--preset--spacing--50);padding-right:0;padding-bottom:0;padding-left:0">
    <div class="wp-block-column" style="flex-basis:100%">
        <div class="wp-block-group has-ast-global-color-2-background-color has-background"
            style="border-radius:10px;padding-top:var(--wp--preset--spacing--30);padding-right:var(--wp--preset--spacing--50);padding-bottom:var(--wp--preset--spacing--30);padding-left:var(--wp--preset--spacing--50)">
            <h3 class="wp-block-heading has-text-align-center">Docker</h3>
            <p style="padding-top:0;padding-bottom:0">Create a
                <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">docker-compose.yml</mark></code>,
                copy the contents under here and run it with
                <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">docker-compose up -d</mark></code>
                (or download the .yml from
                <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-ast-global-color-1-color">https://raw.githubusercontent.com/Toomas633/FileShare/main/examples/docker-compose.yml</mark></code>
                and edit it).
            </p>
            <pre class="wp-block-code has-ast-global-color-5-background-color has-background"
                style="border-radius:10px;padding-top:var(--wp--preset--spacing--20);padding-right:0;padding-bottom:var(--wp--preset--spacing--20)"><code>version: '3.9'
services:
  fileshare:
    image: ghcr.io/toomas633/fileshare:latest #or version number instead of latest
    container_name: fileshare #container name, can be set different
    ports:
      - "8080:80" #map port 8080 from host to 80 on container
    environment:
      - TZ=Europe/London #default timezone for the container and on first database creation
      - MAX_FILESIZE=5M #allowed uploaded file size
      - PASSWORD=Password.123 #password for settings page login, set your own or change it on the page
    volumes:
      - /host/path1:/var/www/html/uploads/ # volume or host dir to a folder where uploads will be held
      - /host/path2:/var/www/html/db/ # volume or host dir to a folder where the database will be held 
    restart: always</code></pre>
        </div>
    </div>
</div>
<hr class="wp-block-separator has-alpha-channel-opacity is-style-wide"
    style="margin-top:var(--wp--preset--spacing--40);margin-bottom:var(--wp--preset--spacing--40)" />